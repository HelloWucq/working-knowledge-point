#一.可扩展性（斗众如斗寡，形名是也）
- 人员是最重要的一块
- 对可扩展的组织，需要合适的人、合适的时间、以合适的行为，做合适的工作
- 设计组织的过程中的因素

	- 易于在现有的组织上增加新的工作单元
	- 容易度量一个时期组织和独立贡献者的工作业绩
	- 把一个目标交给一个团队有多么的困难？团队是否能够感觉到有足够授权去达成目标
	- 团队内部和团队之间的冲突情况如何？是否促进或是阻碍实现公司的使命
	- 组织会促进还是阻碍创新以及市场响应时间
	- 组织的结构会增加还是减少单位产出的成本
	- 工作在组织内部的流转是否容易
- 增加组织的人数可能增加整体产出，但是会降低个人的平均产出率（两张比萨饼原则）
- 管理是和实现目标相关的，缺乏管理可扩展性注定失败
- 领导是和确定目标、描绘愿景、定义使命相关，缺乏领导对达成可扩展性目标不利

#二.可扩展性技术组织的角色（将弱不严，教道不明，吏卒五常，陈兵纵横，曰乱）

- 角色清晰对可扩展任务的成功极为重要
- 责任重叠会造成资源的浪费和价值损毁的冲突
- 无人负责形成真空地带无法完成扩展的任务
- CEO是公司负责扩展性的最高长官
- CTO或者CIO是公司里负责技术扩展的最高长官
- RASCI是一个可以帮助减少责任重叠，产生清晰角色的工具
	- R代表负责，决定要做什么事的人，而且负责任务的实施
	- A代表批准，指在决策过程中批准任务并验收任务结果的人
	- S代表支持，指为完成任务而提供服务的任何人
	- C代表咨询，指在决策前和关于任务完成情况接受咨询的人
	- I代表知情，指需要通知决策和任务执行结果的人
	
#三.组织的设置（将凡治众如治寡，分数是也）
- 组织的结构既可以阻碍也可以促进团队的产出能力和对扩展应用的支持
- 团队的规模和结构是组织的两大关键属性
- 太小的团队没有足够的能力来满足业务发展的需要
- 太大的团队会造成生产率的下降和士气的低落
- 两个传统的组织结构是职能型和矩阵型
- 职能型结构的优势是管理的同质性、责任简单清晰、容易分配任务和很好的遵循标准
- 矩阵型组织的优势是项目的负责人明确，跨部门的沟通有所改善
- 敏捷性结构，特别是按照服务和架构组织的，会提高团队的创新力，可以通过市场响应速度、高质量的新功能和高可用性的服务来衡量

#四.领导力秘籍（先之以身，后之以人，则士无不勇矣）
> 领导力：影响一个组织或者个人达成某个特定目标的行为的力量

- 增强领导力的第一步是要厘清现状，请下级、同级和上级帮你做一个360度调查
- 当带领团队的时候不存在自我意识，要放下自我意识
- 领导应该大公无私
- 以人为本，使命优先。按时完成工作，确保照顾好手下
- 道德至上。教导你所允许的事情，所教导的就成为你的标准
- 所要的一切要与股东的价值一致。不要做无法为股东创造价值的事情
- 变革型领导注重团队的整体，而不是个人。不参与领导与个人的利益交换，而是聚焦团队协作和合作的成果
- 愿景是对理想未来的生动描述
	- 对理想未来的生动描述
	- 为股东创造价值很重要
	- 可度量
	- 激动人心
	- 结合信仰的元素
	- 大致不变，但可以根据需要修改
	- 容易记忆

- 使命是引领你通往愿景的总路径或计划
	- 对当前状态和行动的描述
	- 有目的感
	- 可度量
	- 一个大方向或一条通往愿景的道路

- 目标是通过愿景的目标，它与使命的路径一致。SMART目标
	- 具体
	- 可度量
	- 可达成（有一定的挑战性）
	- 现实性
	- 时限性（或包含时间因素）


- 成功的因果路线图将有助于为愿景、使命或目标设定框架，同时帮助员工了解如何为实现目标作出贡献，如何为股东创造价值

#五.管理秘籍（地生度，度生量，量生数，数生称，称生胜）
> 管理是以明智和合乎道德的手段来完成任务 

- 管理可以被看做一个由个性、能力、经验、行为和方法为参数而组成的函数。提高这些参数的任何方面都会增加你的管理“熵”
- 忘记“管理风格”，想办法适应团队、公司和使命的需要。项目和任务管理是成功管理的关键。这些活动需要有能力来把一个目标分解成多个部分，确定部分之间的关系，分配任务和确定时间点，并基于这些日期度量进展
- 项目管理用5%的时间制定详细的计划，用95%的时间做好应对突发事件的准备。在适当的时间聚焦取得结果，而不是生搬硬套原定的方案
- 人和组织管理活动被分解为“播种、施肥、除草”三个部分
	- 播种是雇佣新人，目的是选拔更好的人。多数管理者在面试上花的时间太少，而且目标设置的不够高。在新员工的面试中，应该包括企业文化和行为
	- 施肥是培养组织内的员工。而不要厌烦的给员工提供高质量的反馈
	- 除草是淘汰表现差的员工。这件事很少做得快，总觉得有义务先反馈表现的评估结果

- 不度量就不能提高。扩展性的度量应包括可用性、响应时间、生产效率、成本和质量
- 目标树可以有效的把组织与公司的目标匹配，并帮助创建“通往成功的因果路线图”
- 管理者为成功铺路。成功的管理者把自己视为团队的关键部分，向共同的目标努力

#六.关系、思维和商业案例（凡用兵之法，将受命于君）
- 技术人员必须负起跨越鸿沟进入业务领域这一责任
- 为获得对扩展性的理解和支持，必须要用业务的语言来说明任务以使业务主管能够理解

#七.过程是可扩展的关键（莫难于军争。军争之难者，以迂为直，以患为利）
> 过程的目的：助力团队和员工的管理，规范员工执行重复性任务时的行为，把员工从日常琐事中解放出来，专注于更大和更多的创意

- 对任何过程，确定实施都是第一步。决定后，下一步是确定要实施的最佳过程数
- 确定最佳过程数的方法：（1）从小到大的周期迭代；（2）让团队决定
- 过程和组织之间配合不好可能导致文化冲突或官僚主义
- 为避免过程和组织之间的问题，你可能会让团队确定合适的数量或者随着时间缓慢增加
- 每个过程都应该指定一个人或团队作为所有者
- 过程维护是保证组织规模与过程匹配的关键

#八.管理故障和问题（久暴师则国用不足）
- 事故时生产环境的问题。事故管理聚焦在及时有效的恢复生产服务的过程
- 问题是事故的原因。问题管理聚焦在确定问题的根源和解决问题的过程
- 事件的管理可以浓缩为DRIER，代表检测、报告、调查、升级和解决
- 思考应该给多少时间来收集数据以及收集哪些数据，将有助于缓解这种紧张关系
- 事故可以有开启、解决、关闭三种状态，而问题则是开启、定位、关闭三种状态
- 每日事故例会组织审查事故和问题的状态、指定负责人、作出业务分类
- 季度事故总结会是对本季度发生过的事故和问题进行回顾和总结，有助于验证那些首次关闭的问题，从理论上分析事故和问题，一帮助调整与扩展性相关的架构、过程和组织工作的优先级
- 事后处理是一个头脑风暴的过程，用于对比较大的事故和问题的管理，可以帮助推动问题的关闭和确定支持任务
- 事后处理应该聚焦在识别造成事故的多种根源上

#九.危机管理和升级（夫兵久而国利者，未之有也）
- 危机处理小组由危机管理者、工程经理和高级工程师组成。此外，向工程经理报告的工程团队也参与解决问题
- 危机管理者的角色是维持秩序和遵循危机解决问题、升级和沟通的过程
- 工程经理的角色是管理其团队。并向危机管理团队报告进展情况
- 工程团队高级工程师的角色是帮助危机管理团队提出和审核有关问题原因的假设，并帮助确定最合适的快速解决方案
- 个人贡献者工程师的角色是跟着自己的团队，确定快速的解决方法，建立和评估问题原因的假设，向自己的经理报告进展状态，他的经理因该是危机管理团队的成员
- 危机管理团队成员应该在作战室面对面的沟通，如果不可能进行面对面的沟通、团队应该使用电话会议和聊天室
- 作战室最好紧靠运维中心，以帮助处理危机
- 在危机管理过程中清楚的定义升级和情况通报。危机发生后，在处理过程中应定期提供状态更新，直到确定和修复所有问题的根源为止
- 在危机的事后处理过程应该积极检查、发现和管理一些列后续问题，并以主事后处理和子后事处理的形式分主题进行，针对所有发现的问题全面出击

#十.生产环境的变更管理（不知彼不知己，每战必殆）
- 变更识别对小公司来说是简单的过程，专注于寻找最近的变化，如果发生事故可以回滚
- 有效的变更识别过程的最低限度应包括变更时间、目标系统、预期结果以及联系方式
- 变更管理的目的是通过控制生产发布和记录活动，限制变更的影响
- 变更管理包括以下几个阶段：请求、审批、调度、执行和日志、验证、回顾
- 变更请求是过程的起始，应该包含以下信息：系统或子系统、预期结果、如何执行、已知风险、已知的依赖关系以及与其他变更或子系统的关系
- 在更先进的变更过程中，变更请求还包含有关风险、回报、建议日期等信息
- 变更审批验证所有信息的正确性，只有提出变更请求的人才有权利做出变更
- 变更调度室通过分析依赖性，评估子系统和组件变更率以限制风险的过程，目的是减少事故的风险。成熟的变更过程包括风险和回报分析
- 变更执行与变更识别过程类似，但包括变更数据库中的开始和完成时间的记录
- 变更验证确保变更满足预期效果。如果失败可以回滚，如果取得部分效果，可以升级
- 变更回顾是变更管理团队对变更过程和结果的内部评审。它分析数据，从而了解变更的速度、失败率、对响应市场时间的影响等
- 在变更控制会议上，会对变更进行审批、调度和执行后回顾。该会议通常有运维主管或基础设施负责人主持，每个工程团队和面向客户的业务团队作为成员参与
- 变更管理过程应由变更小组以外的团队来评审，以确定其有效性，审查应该有首席技术官/首席信息官和公司高管进行
- 在实践持续交付的公司里，变更管理吧规则通过代码集成在自动化测试系统中，以完成自动化发布，在持续交付解决方案中，风险分析、变更识别、变更审批和风险水平都是内在的

#十一.确定应用发展的预留空间（故知战之地，知战之日，则可千里而会战）
- 要为系统的每个主要组件计算预留空间，如每个应用服务器群组、网络设备、带宽和数据库服务器
- 任何组件的最大容量不要超过50%，如果没有以事实为基础的好理由，不要偏离该经验法则

#十二.确定架构原则（故其战胜不忒。不忒者，其所措胜，胜已败者也）
- 原则应该足够宽泛，避免不断修改，应该符合SMART要求
- 如果要确保架构原则得到团队的认可，应该考虑与团队一起来指定
- 确保团队在制定和修改原则过程中遵循RASCI
- 原则的数量控制好，确保容易记忆并增加利用率
	- N+1设计
	- 回滚设计
	- 禁用设计
	- 监控设计
	- 设计多活数据中心
	- 使用成熟的技术
	- 异步设计
	- 无状态系统
	- 水平扩展而非垂直升级
	- 设计至少要有两个步骤的前瞻性
	- 非核心则购买
	- 使用商业化硬件
	- 小构建，小发布，快试错
	- 隔离故障
	- 自动化

#十三.联合架构设计与架构审查委员会（是故胜兵先胜而后求战，败兵先战而后求胜）
- JAD是集中垮部门团队成员能力的最好方法，否则，这些人可能没有机会一起工作
- JAD的成员来自工程、架构和运维
- JAD成功的关键在于过程的完整性，严格坚持准入与批准标准
- 对应用架构进行最后审查的目的是确保设计得到认可
- ARB成员应被视为领导人，受到应有的尊重，并有某些应用或架构领域的专业知识
- ARB会员可以轮换，但该职位通常被视为每个成员在当前职责基础上增加额外的负担
- 所有的ARB应该开始探讨ARB的目的，确保设计支持本组织的业务需求和扩展性
- ARB审查应只授予那些充分准备的项目
- ARB的决定应被视为最终决定。一些组织如有必要，可能包括上述程序

#十四.敏捷架构设计（不用乡导者，不能得地利）
- 敏捷团队应该自主行动，这意味着他们应该拥有自己的服务和产品设计
- ARB和JAD确保跨团队的服务设计。敏捷团队通过自身的构成确保这个结果
- 当运维资源如DevOps工程师或架构师有限时，把他们分配给多个团队。
- 跨团队共享标准和知识，以实现规模经济仍然可以通过敏捷团队来完成。在这种情况下，可以使用各种方法。为组织选择正确的方法取决于多种因素，包括团队的成熟度、产品的复杂性以及分布式命令和控制的舒适度

#十五.聚焦核心竞争力：自建与外购
- 以成本为中心的决策方法的重点是降低整体成本，但因为不聚焦，使其失去战略机会
- 以战略为中心的决策方法的重点是对标公司的长期需求，但不考虑总成本
- 作出一个好的自建与外购决策回答以下问题
	- 自建的组件是否能够形成战略性差异化的竞争优势
	- 我们是该资产最好的所有者吗？
	- 该组件的竞争情况如何
	- 自建的成本效益如何

#十六.确定风险（是故智者之虑，必杂于利害）
- 评估风险的方法
	- 直觉法
	- 交通灯法
	- 故障模式及影响分析法

#十七.性能与压力测试（不知彼不知己，每战必败）
- 性能测试涵盖了广泛的工程评估，重点是衡量最终性能的特点
- 性能测试的目标是识别、记录和消除系统中的瓶颈
- 负载测试时性能测试中的一个过程
- 负载测试在系统中加载用户需求以测量其响应时间和稳定性
- 负载测试的目的是验证应用能够满足预期的性能目标，通常是在服务水平协议中指定的
- 负载和性能测试并不是正确架构的替代品，包括以下步骤
	- 确定应用的标准
	- 建立适当的测试环境
	- 选择合适的测试服务
	- 执行测试
	- 分析数据
	- 向工程师报告，如果他们没有组成敏捷团队
	- 必要的重复
- 压力测试是一个试图确定应用在高于正常负载情况下稳定性的过程
- 相对于负载测试，压力测试施加的压力远远超出正常流量，直至达到应用的失败点，我们观察应用在失败过程中发生的行为
- 压力测试的步骤
	- 确定测试的目标
	- 选择测试的关键服务
	- 确定需要产生多少负载
	- 建立适当的测试环境
	- 确定必须的监视点
	- 产生实际的测试负载
	- 执行测试
	- 分析数据

- 性能测试和压力测试对可扩展性的影响可通过预留空间、变更控制以及风险管理实现

#十八.障碍条件与回滚（先知迂直之计者胜，此军争之法也）
- 障碍条件用在开发生命周期的早期隔离故障
- 障碍条件可以用于任何开发方法的生命周期，虽然应该从过去的错误中收集数据以吸取经验和教训，但并不需要特别多的文档
- ARB设计审查、代码审查、性能测试和对生产环境的度量都是障碍条件的例子，如果任何一个条件失败都需要返工解决发现的问题
- 设计应用具备回滚能力将有助于限制应用版本发布对可扩展性的潜在影响。可以把回滚看成是对业务、股东和客户的保险
- 设计应用具备禁用功能或作为回滚功能补充的服务降级功能，可以保持和增加最新应用版本发布在生产环境中的灵活性，同时可以消除对客户有影响的功能

#十九.构建故障隔离的架构（夫地形者，兵之助也）
- 泳道是故障隔离的架构，泳道里的事故不向外传播，所以不会影响平台的其他功能
- 故障隔离提高了可用性和扩展性，同时减少了上市时间和研发成本
- 泳道里共享的越少，泳道对可用性和扩展性的好处就越大
- 任何通信或交易都不应该跨越泳道的边界
- 泳道顺着交易过程的方向，从不跨越
- 直接影响收入的功能、引起最多问题的功能和可以定义产品的任何自然界限可进入泳道

#二十.AKF扩展立方体介绍（悬权而动）
- X轴代表把同样的工作或数据镜像分配给多个实体，X轴往往是最不昂贵的实施，但受指令多少和数据集大小的约束
- Y轴代表把分割的工作职责或数据分配给多个实体，Y轴往往比X更昂贵，除了构建隔离故障外，还可以解决与指令和数据大小相关的问题
- Z轴代表按照客户、客户的需求、位置或者价值分割或分配工作的职责，Z轴往往实施地最昂贵，经常可以带来最大的扩展性。能解决与数据集大小相关的问题，未必能解决指令集的问题，也可以实现全局服务分配
- ARB,JAD,敏捷设计和预留空间这些过程都是AKF扩展立方体可能派上用场的例子

#二十一.为扩展分割应用（以分和为变者也）
- X轴的应用分割将随着交易量的增加而线性扩展，但这种方法对代码复杂性、客户或数据的增长所需要的扩展性没有帮助。X轴分割通过相互克隆实现
- Y轴的应用分割有助于代码复杂性以及交易量增长的扩展。这种方法更多是解决代码的扩展性问题
- Z轴的应用分割有助于减少缓存的规模，该缓存规模随用户或其他元素的增长而扩展 

#二十二.为扩展分割数据库（兵之形避实而击虚形者）
- X轴表示把相同的数据或镜像分散在多个实体。通常依赖于复制并对有多少节点设限
- Y轴表示基于服务、资源或数据关系的意义分割和分散数据
- Z轴表示基于所查阅或在请求处理是确定的属性分割和分布数据

#二十三.为扩展而缓存（故之所谓善战者，胜于易胜者也）
- 最容易扩展的流量是那些达不到应用层的流量，因为可以通过缓存来提供服务
- 系统架构中有许多层可以考虑缓存
- 缓冲区类似于缓存，可以用来提高性能，如在写入磁盘前需要对数据进行重新排序
- CDN的优点是可以降低交付成本、加快响应时间和卸载请求对应用源服务器的压力

#二十四.为扩展而异步（凡战者，已正合，以奇胜）
- 互斥是一个同步的方法，定义了在多个进程同时运行的情况下，如何保护全局性资源
- 异步调用，被调用的方法在一个新线程中执行，而且立即把控制权返回给调用线程
- 使用状态的应用被称为有状态应用，它依靠当前的执行状态来确定要执行的下个动作
- 状态机是一个抽象的状态和行为模型，最常见的一种状态实施方式是用户会话

#二十五.海量数据（善用兵者，役不再籍，粮不三载）
- 在考虑感性选择价值和主观战略性竞争差异的同时，还应该考虑数据的价值和时间期限，从而对数据能否带给股东更大利益做出正确决定
- 应该删除那些事股东利益受损的数据，或寻找其他的存储方法来降低存储成本是数据增值。分层的存储策略和数据装换是节省成本行之有效的方法
- 通过Y轴和Z轴扩展可以帮助我们快速发现某些关系，并一相对较低的成本用单体集成系统的所有数据进行验证
- 因为数据缺乏结构而不阻碍面向对象的广度分析查询，选择适当的NoSQL方法有助于分析

#二十六.云计算的突飞猛进（是谓胜敌而益强）
- 企业使用云计算必须克服以下障碍
	- 服务的可用性
	- 数据锁定
	- 数据保密和审计能力
	- 数据传输瓶颈
	- 性能的不可预测性
	- 可扩展的存储
	- 大型分布式系统的缺陷
	- 快速扩展的能力
	- 声誉运气共享
	- 软件许可 
#二十七.云计算准备就绪（吾所与战之地不可知，不可知则敌所备者多，敌所备者多，则吾所与战者，寡矣）
- 在云环境中，计算节点、存储系统、网络甚至数据中心都可能会发生可用性问题。虽然在数据中心环境中我们也必须处理这些问题，但是在那里我们有更多的控制和监控
- 为应用做好过渡到云环境的准备，通过IOPS和MBPS测量输入/输出变化是很重要的问题
- 为了适应云环境的I/O可变性，做的准备
	- 为规定的或保证的IOPS付费
	- 增加计算能力一应付显著的I/O约束
	- 将用户请求重定向到I/O没有受到影响的另外一个区、区域、数据中心或其他资源

#二十八.应用监控（富金鼓旌旗者，所以一民之耳目也）
- 设计监控系统时，按顺序依次回答“出问题了吗”、“哪里出了问题”、“是什么问题”是一种有效的自上而下的策略
- “出问题了吗”的监控指标最好与为股东和利益相关者创造价值相匹配。应该采用实时业务指标和用户体验指标
- “哪里出了问题”的监控指标可以很好的使用现有的第三方或开源解决方案，这些方案部署起来相对简单。请注意数据保存期并且使用这些测量方法是尝试使用的实时统计
- “是什么问题”的监控指标最有可能是自己开发的，并与专有应用集成

#二十九.规划数据中心（合军聚众，交和而舍）
- 当产品采纳率的风险很高时，或者不能全时段保持繁忙则租用更加合理，这时候应该利用IaaS的能力
- 三是服务器的神奇数字：为某个服务提供支持的初始服务器数量永远不要少于三
- 至少要设计三个数据中心提供服务
- 多个同时提供服务的多活网站可以提供更高可用性、更有利于的谈判杠杆、更高的运维信心、更低的成本和比传统的热冷灾配置更快的客户响应时间
- 多活网站往往会增加操作的复杂性、出差费用、网络连接相关的费用以及人员的需求
- 多活网站在设计时要争取去除亲和性和状态

#三十.纵观全局（故用兵之法，无恃其不来，恃吾有以待之；无恃其不攻，恃吾有所不可攻也） 
- 四步行动
	- 进行评估。对公司的组织、过程和架构评估。如果必要的话，可以使用外部代理
	- 定义需要达到的水平或者理想状态
	- 列出实际情况和理想状态之间的差异。按照严重性从高到低为这些差异排队
	- 制定行动计划。提出解决前一步确定的问题的行动计划。可能是个有优先级的单一计划，短期和长期计划，或者公司采用的任何其他形式的计划 
